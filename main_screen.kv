<MainScreen>
    md_bg_color: .2, .2, .2, 1
    MDBoxLayout:
        orientation: 'vertical'
        MDTopAppBar:
            title: app.textini[app.lang]["label_adfi"]
            md_bg_color: app.theme_cls.primary_dark
        MDBoxLayout:
            MDGridLayout:
                size_hint: .25, 1
                rows: 6
                MDRectangleFlatIconButton:
                    icon: "camera"
                    line_color: 0, 0, 0, 0
                    text_color: "white"
                    font_size: "18sp"
                    text: app.textini[app.lang]["menu_camera_settings"]
                    on_release:
                        root.leave_screen()
                        app.open_cameras()
                        app.sm.transition.direction = "right"
                        app.sm.current = "camera_setting"
                MDRectangleFlatIconButton:
                    icon: "image"
                    line_color: 0, 0, 0, 0
                    text_color: "white"
                    font_size: "18sp"
                    text: app.textini[app.lang]["menu_preprocessing"]
                    on_release:
                        root.leave_screen()
                        app.open_cameras()
                        app.sm.transition.direction = "right"
                        app.sm.current = "preprocessing"
                MDRectangleFlatIconButton:
                    icon: "cog"
                    line_color: 0, 0, 0, 0
                    text_color: "white"
                    font_size: "18sp"
                    text: app.textini[app.lang]["menu_inspection_settings"]
                    on_release:
                        root.leave_screen()
                        app.sm.transition.direction = "right"
                        app.sm.current = "inspection_setting"
                MDRectangleFlatIconButton:
                    icon: "feature-search"
                    line_color: 0, 0, 0, 0
                    text_color: "white"
                    font_size: "18sp"
                    text: app.textini[app.lang]["menu_dataset"]
                    on_release:
                        root.leave_screen()
                        app.sm.transition.direction = "right"
                        app.sm.current = "making_dataset"
                MDRectangleFlatIconButton:
                    icon: "cog-box"
                    line_color: 0, 0, 0, 0
                    text_color: "white"
                    font_size: "18sp"
                    text: app.textini[app.lang]["menu_aimodel"]
                    on_release:
                        root.leave_screen()
                        app.sm.transition.direction = "right"
                        app.sm.current = "aimodel_setting"
    MDBottomAppBar:
        md_bg_color: app.theme_cls.primary_dark
        MDTopAppBar:
            title: app.textini[app.lang]["label_copyright"]
            icon: "close"
            type: "bottom"
            mode: "end"
            on_action_button: app.popup_open()

    MainImageView:
        id: main_image_view
    MDFloatLayout:
        MDRectangleFlatButton:
            id: change_button
            pos: 300, 220
            text_color: "white"
            font_size: "18sp"
            text: app.textini[app.lang]["main_change"]
            on_release: main_image_view.change_image()
    MDFloatLayout:
        MDBoxLayout:
            pos: 600, 180
            size_hint: .2, .08
            Button:
                id: get_image_button
                text_color: "white"
                background_color: "blue"
                font_size: "22sp"
                text: app.textini[app.lang]["main_inspect_image"]
                disabled: True
                on_release:
                    main_image_view.get_images(-1)
    MDFloatLayout:
        MDBoxLayout:
            pos: 600, 90
            size_hint: .035, .06
            Button:
                id: get_image_button_0
                text_color: "white"
                background_color: "blue"
                font_size: "16sp"
                text: "0"
                disabled: True
                on_release:
                    main_image_view.get_images(0)
    MDFloatLayout:
        MDBoxLayout:
            pos: 665, 90
            size_hint: .035, .06
            Button:
                id: get_image_button_1
                text_color: "white"
                background_color: "blue"
                font_size: "16sp"
                text: "1"
                disabled: True
                on_release:
                    main_image_view.get_images(1)
    MDFloatLayout:
        MDBoxLayout:
            pos: 730, 90
            size_hint: .035, .06
            Button:
                id: get_image_button_2
                text_color: "white"
                background_color: "blue"
                font_size: "16sp"
                text: "2"
                disabled: True
                on_release:
                    main_image_view.get_images(2)
    MDFloatLayout:
        MDBoxLayout:
            pos: 795, 90
            size_hint: .035, .06
            Button:
                id: get_image_button_3
                text_color: "white"
                background_color: "blue"
                font_size: "16sp"
                text: "3"
                disabled: True
                on_release:
                    main_image_view.get_images(3)
    MDFloatLayout:
        MDBoxLayout:
            pos: 860, 90
            size_hint: .035, .06
            Button:
                id: get_image_button_4
                text_color: "white"
                background_color: "blue"
                font_size: "16sp"
                text: "4"
                disabled: True
                on_release:
                    main_image_view.get_images(4)
    MDFloatLayout:
        MDGridLayout:
            pos: 1000, 100
            size_hint: .4, .3
            rows: 4
            cols: 2
            MDLabel:
                text: app.textini[app.lang]["main_inspection_name"]
                font_size: "14sp"
            MDLabel:
                id: inspection_name
                font_size: "14sp"
            MDLabel:
                text: app.textini[app.lang]["main_preprocessing_name"]
                font_size: "14sp"
            MDLabel:
                id: image_name
                font_size: "14sp"
            MDLabel:
                text: app.textini[app.lang]["main_save_inspected_image"]
                font_size: "14sp"
            MDSwitch:
                id: save_image
                active: True
                disabled: False
            MDLabel:
                text: app.textini[app.lang]["main_save_inspection_results"]
                font_size: "14sp"
            MDSwitch:
                id: save_results
                active: True
                disabled: False
    MDFloatLayout:
        MDGridLayout:
            pos: 1000, 500
            size_hint: .4, .3
            rows: 6
            cols: 3
            MDLabel:
                text: app.textini[app.lang]["main_inspected_image"]
                font_size: "14sp"
                size_hint_x: None
                width: 270
            MDLabel:
                text: app.textini[app.lang]["main_result"]
                font_size: "14sp"
                size_hint_x: None
                width: 110
            MDLabel:
                id : text_save_train_image
                text: app.textini[app.lang]["main_save_train_image"]
                font_size: "14sp"
                opacity: 0
            MDLabel:
                id: preprocessing_0
                font_size: "14sp"
            MDRaisedButton:
                id: result_0
                text_color: "white"
                md_bg_color: "black"
                font_size: "14sp"
                on_release: main_image_view.show_image(0)
            MDRaisedButton:
                id: save_0
                text: app.textini[app.lang]["main_save"]
                text_color: "white"
                md_bg_color: "black"
                font_size: "14sp"
                on_release: main_image_view.show_save_image(0)
                disabled: True
                opacity: 0
            MDLabel:
                id: preprocessing_1
                font_size: "14sp"
            MDRaisedButton:
                id: result_1
                text_color: "white"
                md_bg_color: "black"
                font_size: "14sp"
                on_release: main_image_view.show_image(1)
            MDRaisedButton:
                id: save_1
                text: app.textini[app.lang]["main_save"]
                text_color: "white"
                md_bg_color: "black"
                font_size: "14sp"
                on_release: main_image_view.show_save_image(1)
                disabled: True
                opacity: 0
            MDLabel:
                id: preprocessing_2
                font_size: "14sp"
            MDRaisedButton:
                id: result_2
                text_color: "white"
                md_bg_color: "black"
                font_size: "14sp"
                on_release: main_image_view.show_image(2)
            MDRaisedButton:
                id: save_2
                text: app.textini[app.lang]["main_save"]
                text_color: "white"
                md_bg_color: "black"
                font_size: "14sp"
                on_release: main_image_view.show_save_image(2)
                disabled: True
                opacity: 0
            MDLabel:
                id: preprocessing_3
                font_size: "14sp"
            MDRaisedButton:
                id: result_3
                text_color: "white"
                md_bg_color: "black"
                font_size: "14sp"
                on_release: main_image_view.show_image(3)
            MDRaisedButton:
                id: save_3
                text: app.textini[app.lang]["main_save"]
                text_color: "white"
                md_bg_color: "black"
                font_size: "14sp"
                on_release: main_image_view.show_save_image(3)
                disabled: True
                opacity: 0
            MDLabel:
                id: preprocessing_4
                font_size: "14sp"
            MDRaisedButton:
                id: result_4
                text_color: "white"
                md_bg_color: "black"
                font_size: "14sp"
                on_release: main_image_view.show_image(4)
            MDRaisedButton:
                id: save_4
                text: app.textini[app.lang]["main_save"]
                text_color: "white"
                md_bg_color: "black"
                font_size: "14sp"
                on_release: main_image_view.show_save_image(4)
                disabled: True
                opacity: 0
    MDFloatLayout:
        MDRaisedButton:
            id: message
            pos: 300, 780
            size_hint: .8, .05
            text_color: "white"
            md_bg_color: "black"
            font_size: "18sp"
            text: app.textini[app.lang]["main_massage_loading_camera"]

<PopupImageScreen>
    id: popup_image_screen
    orientation: 'vertical'
    MDBoxLayout:
        size_hint: 1, .1
        MDRaisedButton:
            id: result
            text_color: "white"
            md_bg_color: "black"
            font_size: "24sp"
        MDLabel:
            id: popup_title
            size_hint: .8, .1
            halign: "center"
            adaptive_height: True
            text: app.textini[app.lang]["main_result_image_title"]
    MDLabel:
        size_hint: 1, .05
        text: ""
    MDBoxLayout:
        size_hint: 1, .75
        Image:
            id: popup_image
            size: 800, 800
            allow_stretch: True
            keep_ratio: True
    MDBoxLayout:
        size_hint: 1, .1
        MDFillRoundFlatButton:
            text: app.textini[app.lang]["ok_a"]
            on_release: root.dismiss_popup()

<PopupSaveImageScreen>
    id: popup_save_image_screen
    orientation: 'vertical'
    MDBoxLayout:
        size_hint: 1, .05
        MDLabel:
            id: popup_save_title
            size_hint: .8, .1
            halign: "center"
            adaptive_height: True
            text: app.textini[app.lang]["main_save_image_title"]
    MDBoxLayout:
        size_hint: 1, .05
        MDLabel:
            id: popup_save_dir_path
            size_hint: .8, .1
            halign: "center"
            adaptive_height: True
    MDLabel:
        size_hint: 1, .05
        text: ""
    MDBoxLayout:
        size_hint: 1, .75
        Image:
            id: popup_save_image
            size: 800, 800
            allow_stretch: True
            keep_ratio: True
    MDBoxLayout:
        size_hint: 1, .1
        MDRaisedButton:
            id: normal
            text: app.textini[app.lang]["main_save_normal"]
            text_color: "white"
            md_bg_color: "blue"
            on_release: root.save_image(0)
        MDRaisedButton:
            id: anomaly
            text: app.textini[app.lang]["main_save_anomaly"]
            text_color: "white"
            md_bg_color: "red"
            on_release: root.save_image(1)
        MDLabel:
            text: ""
        MDFillRoundFlatButton:
            text: app.textini[app.lang]["main_save_cancel"]
            on_release: root.dismiss_popup()